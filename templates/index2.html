
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Bean &mdash;</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Free HTML5 Template by FREEHTML5.CO" />
		<meta name="keywords" content="free html5, free template, free bootstrap, html5, css3, mobile first, responsive" />
		<meta name="author" content="FREEHTML5.CO" />

		<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
		<link rel="shortcut icon" href="favicon.ico">

		<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700,300' rel='stylesheet' type='text/css'>
		
		<!-- Animate.css -->
		<link rel="stylesheet" href="static/css/animate.css">
		<!-- Icomoon Icon Fonts-->
		<link rel="stylesheet" href="static/css/icomoon.css">
		<!-- Bootstrap  -->
		<link rel="stylesheet" href="static/css/bootstrap.css">
		<!-- Superfish -->
		<link rel="stylesheet" href="static/css/superfish.css">
		<!-- Magnific Popup -->
		<link rel="stylesheet" href="static/css/magnific-popup.css">
		<!-- Date Picker -->
		<link rel="stylesheet" href="static/css/bootstrap-datepicker.min.css">
		<!-- CS Select -->
		<link rel="stylesheet" href="static/css/cs-select.css">
		<link rel="stylesheet" href="static/css/cs-skin-border.css">
		
		<link rel="stylesheet" href="static/css/style.css">
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">

		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		
	
		<!-- Modernizr JS -->
		<script src="static/js/modernizr-2.6.2.min.js"></script>
		<!-- FOR IE9 below -->
		<!--[if lt IE 9]>
		<script src="js/respond.min.js"></script>
		<![endif]-->

	</head>
	<body>
		<div id="fh5co-wrapper">
		<div id="fh5co-page">

		<header id="fh5co-header-section" class="sticky-banner">
			<div class="container">
				<div class="nav-header">
					<a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle dark"><i></i></a>
					<h1 id="fh5co-logo"><a href="/index2"></i>Bean</a></h1>
					<!-- START #fh5co-menu-wrap -->
					<nav id="fh5co-menu-wrap" role="navigation">
						<ul class="sf-menu" id="fh5co-primary-menu">
							<li class="active"><a href="/index2">Home</a></li>
                            <li><a href="/data">Data</a></li>
							<li><a href="/">Logout</a></li>
						</ul>
					</nav>
				</div>
			</div>
		</header>

		<!-- end:header-top -->
	
		<div class="fh5co-hero">
			<div class="fh5co-overlay"></div>
			<div class="fh5co-cover" data-stellar-background-ratio="0.5" style="background-image: url(static/images/cover_bg_1.jpg);">
				<div class="desc">
					<div class="container">
						<div class="row">
							<div class="col-sm-5 col-md-5">
								<div class="tabulation animate-box">

								  <!-- Nav tabs -->
								   <ul class="nav nav-tabs" role="tablist">
								      <li role="presentation" class="active">
								      	<a href="#flights" aria-controls="flights" role="tab" data-toggle="tab">Inside</a>
								      </li>
								      <li role="presentation">
								    	   <a href="#hotels" aria-controls="hotels" role="tab" data-toggle="tab">Platform</a>
								      </li>
								   </ul>

								   <!-- Tab panes -->
									<div class="tab-content">
									 <div role="tabpanel" class="tab-pane active" id="flights">
										<form class="row" action = "/index2" method="post" id = 'stationForm'>
											<div class="col-xxs-12 col-xs-12 mt">
												<div class="input-field">
													<label for="from">Station:</label>
													<input type="text" name = "Station" class="form-control" id="from-place" placeholder="Station"/>
												</div>
											</div>
											<div class="col-xxs-12 col-xs-6 mt alternate">
												<div class="input-field">
													<label for="from">Last Station:</label>
													<span type="text" class="form-control" id="last_station">{{last_station}}</span>
												</div>
											</div>
											<div class="col-xxs-12 col-xs-6 mt alternate">
												<div class="input-field">
													<label for="date-start">Next Station:</label>
													<span type="text" class="form-control" id="next_station">{{next_station}}</span>
												</div>
											</div>
											<div class="col-sm-12 mt">
												<section>
													<label for="class">Congestion:</label>
													<div class="progress-bar">
														<div class="progress" id="progress_value_inside" style="width: {{ progress_value_inside }}%;">
															{{ progress_value_inside }}%
														</div>
													</div>
												</section>
											</div>
											


											<div class="col-xxs-12 col-xs-6 mt">
												<section>
													<label for="class">Arrive:</label>
													<span type="text" class="form-control" id="arrive1">{{arrive1}}</span>
												</section>
											</div>
											<div class="col-xxs-12 col-xs-6 mt">
												<section>
													<label for="class">:</label>
													<span type="text" class="form-control" id="">1</span>
												</section>
											</div>
											<div class="col-xxs-12 col-xs-6 mt">
												<section>
													<span type="text" class="form-control" id="arrive2">{{arrive2}}</span>
												</section>
											</div>
											<div class="col-xxs-12 col-xs-6 mt">
												<section>
													<span type="text" class="form-control" id="">2</span>
												</section>
											</div>

											<div class="col-xs-12">
												<button type="button" class="btn btn-primary btn-block" id = updateButtonInside>Search Station</button>
												<script>
													$(document).ready(function() {
														$('#updateButtonInside').click(function(event) {
															event.preventDefault();

															$.ajax({
																type: 'POST',
																url: '/update_variable', // 서버 측 라우트
																data: $('#stationForm').serialize(),
																success: function(data) {
									
																
																	$('#last_station').text(data.last_station)
																	$('#next_station').text(data.next_station);
        															$('#arrive1').val(data.arrive1).text(data.arrive1);
        															$('#arrive2').val(data.arrive2).text(data.arrive2);
																}
															});

															$.ajax({
																type: 'GET',
																url: '/save_people_bbox',  // 서버 측 라우트
																success: function(data) {
																	var savedPeople = parseInt(data);

																	// savedPeople 값을 활용하여 프로그레스 바 업데이트
																	var progressValueInside = Math.floor((savedPeople / 30) * 100); // 예: 50%의 경우 savedPeople 값 자체를 활용하거나 조정
																	$('#progress_value_inside').css('width', progressValueInside + '%').text(progressValueInside + '%');
																}
															});
															var selectedStation = $('input[name=Station]').val();
															if(selectedStation=='종각역'){
																$('#video1').show();
																$('#video2, #video3').hide();
															}
															else if(selectedStation=='시청역'){
																$('#video2').show();
																$('#video1, #video3').hide();
															}
															else if(selectedStation=='서울역'){
																$('#video3').show();
																$('#video1, #video2').hide();
															}
															else{
																$('#video1, #video2, #video3').hide();
															}
														});
													});

												</script>
											</div>
										</form>
										
									 </div>

									 <div role="tabpanel" class="tab-pane" id="hotels">
										<form class="row" action = "/index2" method="post" id = "stationForm1">
										   <div class="col-xxs-12 col-xs-12 mt">
											   <div class="input-field">
												   <label for="from">Station:</label>
												   <input type="text" name = "Station1" class="form-control" id="Station1" placeholder="Station"/>
											   </div>
										   </div>
										   <div class="col-xxs-12 col-xs-6 mt alternate">
											   <div class="input-field">
												   <label for="from">Last Station:</label>
												   <span type="text" class="form-control" id="last_station_1">{{last_station}}</span>
											   </div>
										   </div>
										   <div class="col-xxs-12 col-xs-6 mt alternate">
											   <div class="input-field">
												   <label for="date-start">Next Station:</label>
												   <span type="text" class="form-control" id="next_station_1">{{next_station}}</span>
											   </div>
											   <!--<div id="outputArea"></div>-->
										   </div>
										   <div class="col-sm-12 mt">
											   <section>
												   <label for="class">Congestion:</label>
												   <div class="progress-bar">
													   <div id = "progress_value_go" class="progress1" style="width: {{ progress_value_go }}%;">
														   {{ progress_value_go }}%
													   </div>
												   </div>
											   </section>
										   </div>
										   

										   <div class="col-xxs-12 col-xs-6 mt">
											   <section>
												   <label for="class">Arrive:</label>
												   <span type="text" class="form-control" id="arrive1_1">{{arrive1}}</span>
											   </section>
										   </div>
										   <div class="col-xxs-12 col-xs-6 mt">
											   <section>
												   <label for="class">:</label>
												   <span type="text" class="form-control" id="arrive2_1">{{arrive2}}</span>
											   </section>
										   </div>
										   
											<div class="col-xs-12">
												<button type="button" class="btn btn-primary btn-block" id="updateButtonPlatform">Search Station</button>
												<script>
													$(document).ready(function() {
														$('#updateButtonPlatform').click(function(event) {
															event.preventDefault();


															$.ajax({
																type: 'POST',
																url: '/update_variable_1', // 서버 측 라우트
																data: $('#stationForm1').serialize(),
																success: function(data) {
																
																
																	$('#last_station_1').text(data.last_station)
																	$('#next_station_1').text(data.next_station);
                    												$('#arrive1_1').text(data.arrive1);
                    												$('#arrive2_1').text(data.arrive2);
																}
															});

															$.ajax({
																type: 'GET',
																url: '/save_people_bbox',  // 서버 측 라우트
																success: function(data) {
																	var savedPeople = parseInt(data);

																	// savedPeople 값을 활용하여 프로그레스 바 업데이트
																	var progressValuePlatform = Math.floor((savedPeople / 30) * 100); // 예: 50%의 경우 savedPeople 값 자체를 활용하거나 조정
																	$('#progress_value_go').css('width', progressValuePlatform + '%').text(progressValuePlatform + '%');
																}
															});

															var selectedStation = $('input[name=Station]').val();
															if(selectedStation=='종각역'){
																$('#video1').show();
																$('#video2, #video3').hide();
															}
															else if(selectedStation=='시청역'){
																$('#video2').show();
																$('#video1, #video3').hide();
															}
															else if(selectedStation=='서울역'){
																$('#video3').show();
																$('#video1, #video2').hide();
															}
															else{
																$('#video1, #video2, #video3').hide();
															}
														});
													});
												</script>
											</div>
											
										</form>

										
									</div>

									</div>

								</div>
							</div>
							
							<div class="tabulation2 animate-box" id="map" style="width:60%; height:543px">
								<div class="animation-box" style="position: relative; overflow: hidden;">
									<img src="{{url_for('video') }}" alt="Video Stream" style="width: 100%; height: 100%;">
									
								</div>
								
								<script type="text/javascript">
									document.addEventListener("keydown", function(event) {
										if (event.key === "Escape") {
											fetch('/toggle_pause')
												.then(response => response.text())
												.then(data => {
													console.log(data);
												});
										}
									});
								</script>
							</div>
							
						</div>
					</div>
				</div>
			</div>

		</div>
		
		<footer>
			<div id="footer">
				<div class="container">
					<div class="row row-bottom-padded-md">
						
						<div class="row">
							<div class="col-md-6 col-md-offset-3 text-center">
								<p class="fh5co-social-icons">
									<a href="https://github.com/ghwjd/Bean.git" target="_blank"><i class="icon-github"></i></a>
								</p>
							</div>
						</div>
				</div>
			</div>
		</footer>

	

		</div>
	<!-- END fh5co-page -->


	<!-- jQuery -->
	<script src="static/js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="static/js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="static/js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="static/js/jquery.waypoints.min.js"></script>
	<script src="static/js/sticky.js"></script>

	<!-- Stellar -->
	<script src="static/js/jquery.stellar.min.js"></script>
	<!-- Superfish -->
	<script src="static/js/hoverIntent.js"></script>
	<script src="static/js/superfish.js"></script>
	<!-- Magnific Popup -->
	<script src="static/js/jquery.magnific-popup.min.js"></script>
	<script src="static/js/magnific-popup-options.js"></script>
	<!-- Date Picker -->
	<script src="static/js/bootstrap-datepicker.min.js"></script>
	<!-- CS Select -->
	<script src="static/js/classie.js"></script>
	<script src="static/js/selectFx.js"></script>
	
	<!-- Main JS -->
	<script src="static/js/main.js"></script>

	</body>
</html>

